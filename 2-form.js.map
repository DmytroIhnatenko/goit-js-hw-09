{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["import JustValidate from 'just-validate';\n\nlet LOCAL_VALUES = 'feedback-form-state';\n\nlet formData = getStorageData();\n\nupdateText();\n\nconst currentForm = document.querySelector('.feedback-form');\n\ncurrentForm.addEventListener('input', e => {\n  if (e.target.name != 'email' && e.target.name != 'message') {\n    return;\n  }\n\n  updateLocalStorage(prepareData(e.target.name, e.target.value));\n});\n\nfunction prepareData(key, inputData) {\n  formData[key] = inputData.trim();\n\n  return JSON.stringify(formData);\n}\n\nfunction updateLocalStorage(dataUpdate) {\n  localStorage.setItem(LOCAL_VALUES, dataUpdate);\n}\n\nfunction getStorageData() {\n  return (\n    JSON.parse(localStorage.getItem(LOCAL_VALUES)) || { email: '', message: '' }\n  );\n}\n\nfunction updateText() {\n  formData = getStorageData();\n  for (const key in formData) {\n    const keyValue = formData[key];\n    document.querySelector(`#${key}`).value = keyValue;\n\n    updateLocalStorage(prepareData(key, keyValue));\n  }\n}\n\nconst validator = new JustValidate('.feedback-form');\nvalidator\n  .addField('.form-input', [\n    {\n      rule: 'required',\n      errorMessage: \"Поле email - обов'язкове\",\n    },\n    {\n      rule: 'required',\n    },\n    {\n      rule: 'email',\n      errorMessage: 'Не правильний формат. Перевірте ще раз.',\n    },\n  ])\n  .addField('.form-text', [\n    {\n      validator: value => {\n        return value !== undefined && String(value).trim().length > 3;\n      },\n      errorMessage:\n        'Повідомлення повинне бути не менше 3 символів. З трьох символів лише погані повідомлення',\n    },\n  ])\n  .onSuccess(() => {\n    console.log('success', formData);\n    localStorage.removeItem(LOCAL_VALUES);\n    formData = getStorageData();\n    currentForm.reset();\n  });\n"],"names":["LOCAL_VALUES","formData","getStorageData","updateText","currentForm","updateLocalStorage","prepareData","key","inputData","dataUpdate","keyValue","validator","JustValidate","value"],"mappings":"wIAEA,IAAIA,EAAe,sBAEfC,EAAWC,EAAgB,EAE/BC,EAAY,EAEZ,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EAE3DA,EAAY,iBAAiB,QAAS,GAAK,CACrC,EAAE,OAAO,MAAQ,SAAW,EAAE,OAAO,MAAQ,WAIjDC,EAAmBC,EAAY,EAAE,OAAO,KAAM,EAAE,OAAO,KAAK,CAAC,CAC/D,CAAC,EAED,SAASA,EAAYC,EAAKC,EAAW,CACnC,OAAAP,EAASM,CAAG,EAAIC,EAAU,KAAM,EAEzB,KAAK,UAAUP,CAAQ,CAChC,CAEA,SAASI,EAAmBI,EAAY,CACtC,aAAa,QAAQT,EAAcS,CAAU,CAC/C,CAEA,SAASP,GAAiB,CACxB,OACE,KAAK,MAAM,aAAa,QAAQF,CAAY,CAAC,GAAK,CAAE,MAAO,GAAI,QAAS,EAAE,CAE9E,CAEA,SAASG,GAAa,CACpBF,EAAWC,EAAgB,EAC3B,UAAWK,KAAON,EAAU,CAC1B,MAAMS,EAAWT,EAASM,CAAG,EAC7B,SAAS,cAAc,IAAIA,CAAG,EAAE,EAAE,MAAQG,EAE1CL,EAAmBC,EAAYC,EAAKG,CAAQ,CAAC,CACjD,CACA,CAEA,MAAMC,EAAY,IAAIC,EAAa,gBAAgB,EACnDD,EACG,SAAS,cAAe,CACvB,CACE,KAAM,WACN,aAAc,0BACf,EACD,CACE,KAAM,UACP,EACD,CACE,KAAM,QACN,aAAc,yCACf,CACF,CAAA,EACA,SAAS,aAAc,CACtB,CACE,UAAWE,GACFA,IAAU,QAAa,OAAOA,CAAK,EAAE,KAAI,EAAG,OAAS,EAE9D,aACE,0FACH,CACF,CAAA,EACA,UAAU,IAAM,CACf,QAAQ,IAAI,UAAWZ,CAAQ,EAC/B,aAAa,WAAWD,CAAY,EACpCC,EAAWC,EAAgB,EAC3BE,EAAY,MAAO,CACvB,CAAG"}