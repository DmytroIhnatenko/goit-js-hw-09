var Q=Object.defineProperty,J=(m,t,a)=>t in m?Q(m,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[t]=a,F=(m,t,a)=>(J(m,typeof t!="symbol"?t+"":t,a),a);const ee=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,te=/^-?[0-9]\d*$/,ie=/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,oe=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,se=m=>{let t=m;return typeof m=="string"&&(t=m.trim()),!t},ne=m=>ee.test(m),re=(m,t)=>m.length>t,ae=(m,t)=>m.length<t,le=m=>typeof m!="string"?!1:!isNaN(+m)&&!isNaN(parseFloat(m)),de=m=>te.test(m),ce=m=>ie.test(m),fe=m=>oe.test(m),ue=(m,t)=>m>t,he=(m,t)=>m<t,A=m=>typeof m!="string"||m==="";var x=(m=>(m.Required="required",m.Email="email",m.MinLength="minLength",m.MaxLength="maxLength",m.Password="password",m.Number="number",m.Integer="integer",m.MaxNumber="maxNumber",m.MinNumber="minNumber",m.StrongPassword="strongPassword",m.CustomRegexp="customRegexp",m.MinFilesCount="minFilesCount",m.MaxFilesCount="maxFilesCount",m.Files="files",m))(x||{}),B=(m=>(m.Required="required",m))(B||{}),R=(m=>(m.Label="label",m.LabelArrow="labelArrow",m))(R||{});const $=[{key:x.Required,dict:{en:"The field is required"}},{key:x.Email,dict:{en:"Email has invalid format"}},{key:x.MaxLength,dict:{en:"The field must contain a maximum of :value characters"}},{key:x.MinLength,dict:{en:"The field must contain a minimum of :value characters"}},{key:x.Password,dict:{en:"Password must contain minimum eight characters, at least one letter and one number"}},{key:x.StrongPassword,dict:{en:"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}},{key:x.Number,dict:{en:"Value should be a number"}},{key:x.MaxNumber,dict:{en:"Number should be less or equal than :value"}},{key:x.MinNumber,dict:{en:"Number should be more or equal than :value"}},{key:x.MinFilesCount,dict:{en:"Files count should be more or equal than :value"}},{key:x.MaxFilesCount,dict:{en:"Files count should be less or equal than :value"}},{key:x.Files,dict:{en:"Uploaded files have one or several invalid properties (extension/size/type etc)."}}],pe="Value is incorrect",z=m=>typeof m=="object"&&m!==null&&"then"in m&&typeof m.then=="function",me=m=>{let t=m;const a=[];for(;t;)a.unshift(t),t=t.parentNode;return a},ge=(m,t)=>{const a=[...t].reverse();for(let n=0,r=a.length;n<r;++n){const u=a[n];for(const f in m){const v=m[f];if(v.groupElem===u)return[f,v]}}return null},P=m=>Array.isArray(m)?m.filter(t=>t.length>0):typeof m=="string"&&m.trim()?[...m.split(" ").filter(t=>t.length>0)]:[],V=m=>m instanceof Element||m instanceof HTMLDocument,ve=".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}",j=5,q={errorFieldStyle:{color:"#b81111",border:"1px solid #B81111"},errorFieldCssClass:"just-validate-error-field",successFieldCssClass:"just-validate-success-field",errorLabelStyle:{color:"#b81111"},errorLabelCssClass:"just-validate-error-label",successLabelCssClass:"just-validate-success-label",focusInvalidField:!0,lockForm:!0,testingMode:!1,validateBeforeSubmitting:!1,submitFormAutomatically:!1};class Ce{constructor(t,a,n){F(this,"form",null),F(this,"fields",{}),F(this,"groupFields",{}),F(this,"errors",{}),F(this,"isValid",!1),F(this,"isSubmitted",!1),F(this,"globalConfig",q),F(this,"errorLabels",{}),F(this,"successLabels",{}),F(this,"eventListeners",[]),F(this,"dictLocale",$),F(this,"currentLocale","en"),F(this,"customStyleTags",{}),F(this,"onSuccessCallback"),F(this,"onFailCallback"),F(this,"onValidateCallback"),F(this,"tooltips",[]),F(this,"lastScrollPosition"),F(this,"isScrollTick"),F(this,"fieldIds",new Map),F(this,"getKeyByFieldSelector",r=>this.fieldIds.get(r)),F(this,"getFieldSelectorByKey",r=>{for(const[u,f]of this.fieldIds)if(r===f)return u}),F(this,"getCompatibleFields",()=>{const r={};return Object.keys(this.fields).forEach(u=>{let f=u;const v=this.getFieldSelectorByKey(u);typeof v=="string"&&(f=v),r[f]={...this.fields[u]}}),r}),F(this,"setKeyByFieldSelector",r=>{if(this.fieldIds.has(r))return this.fieldIds.get(r);const u=String(this.fieldIds.size+1);return this.fieldIds.set(r,u),u}),F(this,"refreshAllTooltips",()=>{this.tooltips.forEach(r=>{r.refresh()})}),F(this,"handleDocumentScroll",()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame(()=>{this.refreshAllTooltips(),this.isScrollTick=!1}),this.isScrollTick=!0)}),F(this,"formSubmitHandler",r=>{r.preventDefault(),this.isSubmitted=!0,this.validateHandler(r)}),F(this,"handleFieldChange",r=>{let u;for(const f in this.fields)if(this.fields[f].elem===r){u=f;break}u&&(this.fields[u].touched=!0,this.validateField(u,!0))}),F(this,"handleGroupChange",r=>{let u;for(const f in this.groupFields)if(this.groupFields[f].elems.find(N=>N===r)){u=f;break}u&&(this.groupFields[u].touched=!0,this.validateGroup(u,!0))}),F(this,"handlerChange",r=>{r.target&&(this.handleFieldChange(r.target),this.handleGroupChange(r.target),this.renderErrors())}),this.initialize(t,a,n)}initialize(t,a,n){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=q,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],this.currentLocale="en",typeof t=="string"){const r=document.querySelector(t);if(!r)throw Error(`Form with ${t} selector not found! Please check the form selector`);this.setForm(r)}else if(t instanceof HTMLFormElement)this.setForm(t);else throw Error("Form selector is not valid. Please specify a string selector or a DOM element.");if(this.globalConfig={...q,...a},n&&(this.dictLocale=[...n,...$]),this.isTooltip()){const r=document.createElement("style");r.textContent=ve,this.customStyleTags[R.Label]=document.head.appendChild(r),this.addListener("scroll",document,this.handleDocumentScroll)}}getLocalisedString(t,a,n){var r;const u=n??t;let f=(r=this.dictLocale.find(v=>v.key===u))==null?void 0:r.dict[this.currentLocale];if(f||n&&(f=n),f&&a!==void 0)switch(t){case x.MaxLength:case x.MinLength:case x.MaxNumber:case x.MinNumber:case x.MinFilesCount:case x.MaxFilesCount:f=f.replace(":value",String(a))}return f||n||pe}getFieldErrorMessage(t,a){const n=typeof t.errorMessage=="function"?t.errorMessage(this.getElemValue(a),this.fields):t.errorMessage;return this.getLocalisedString(t.rule,t.value,n)}getFieldSuccessMessage(t,a){const n=typeof t=="function"?t(this.getElemValue(a),this.fields):t;return this.getLocalisedString(void 0,void 0,n)}getGroupErrorMessage(t){return this.getLocalisedString(t.rule,void 0,t.errorMessage)}getGroupSuccessMessage(t){if(t.successMessage)return this.getLocalisedString(void 0,void 0,t.successMessage)}setFieldInvalid(t,a){this.fields[t].isValid=!1,this.fields[t].errorMessage=this.getFieldErrorMessage(a,this.fields[t].elem)}setFieldValid(t,a){this.fields[t].isValid=!0,a!==void 0&&(this.fields[t].successMessage=this.getFieldSuccessMessage(a,this.fields[t].elem))}setGroupInvalid(t,a){this.groupFields[t].isValid=!1,this.groupFields[t].errorMessage=this.getGroupErrorMessage(a)}setGroupValid(t,a){this.groupFields[t].isValid=!0,this.groupFields[t].successMessage=this.getGroupSuccessMessage(a)}getElemValue(t){switch(t.type){case"checkbox":return t.checked;case"file":return t.files;default:return t.value}}validateGroupRule(t,a,n){switch(n.rule){case B.Required:a.every(r=>!r.checked)?this.setGroupInvalid(t,n):this.setGroupValid(t,n)}}validateFieldRule(t,a,n,r=!1){const u=n.value,f=this.getElemValue(a);if(n.plugin){n.plugin(f,this.getCompatibleFields())||this.setFieldInvalid(t,n);return}switch(n.rule){case x.Required:{se(f)&&this.setFieldInvalid(t,n);break}case x.Email:{if(A(f))break;ne(f)||this.setFieldInvalid(t,n);break}case x.MaxLength:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(A(f))break;re(f,u)&&this.setFieldInvalid(t,n);break}case x.MinLength:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(A(f))break;ae(f,u)&&this.setFieldInvalid(t,n);break}case x.Password:{if(A(f))break;ce(f)||this.setFieldInvalid(t,n);break}case x.StrongPassword:{if(A(f))break;fe(f)||this.setFieldInvalid(t,n);break}case x.Number:{if(A(f))break;le(f)||this.setFieldInvalid(t,n);break}case x.Integer:{if(A(f))break;de(f)||this.setFieldInvalid(t,n);break}case x.MaxNumber:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(A(f))break;const v=+f;(Number.isNaN(v)||ue(v,u))&&this.setFieldInvalid(t,n);break}case x.MinNumber:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(A(f))break;const v=+f;(Number.isNaN(v)||he(v,u))&&this.setFieldInvalid(t,n);break}case x.CustomRegexp:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(t,n);return}let v;try{v=new RegExp(u)}catch{console.error(`Value for ${n.rule} rule for [${t}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(t,n);break}const N=String(f);N!==""&&!v.test(N)&&this.setFieldInvalid(t,n);break}case x.MinFilesCount:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(Number.isFinite(f==null?void 0:f.length)&&f.length<u){this.setFieldInvalid(t,n);break}break}case x.MaxFilesCount:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(t,n);break}if(typeof u!="number"){console.error(`Value for ${n.rule} rule for [${t}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(t,n);break}if(Number.isFinite(f==null?void 0:f.length)&&f.length>u){this.setFieldInvalid(t,n);break}break}case x.Files:{if(u===void 0){console.error(`Value for ${n.rule} rule for [${t}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(t,n);return}if(typeof u!="object"){console.error(`Value for ${n.rule} rule for [${t}] field should be an object. This field will be always invalid.`),this.setFieldInvalid(t,n);return}const v=u.files;if(typeof v!="object"){console.error(`Value for ${n.rule} rule for [${t}] field should be an object with files array. This field will be always invalid.`),this.setFieldInvalid(t,n);return}const N=(S,I)=>{const M=Number.isFinite(I.minSize)&&S.size<I.minSize,L=Number.isFinite(I.maxSize)&&S.size>I.maxSize,k=Array.isArray(I.names)&&!I.names.includes(S.name),X=Array.isArray(I.extensions)&&!I.extensions.includes(S.name.split(".")[S.name.split(".").length-1]),b=Array.isArray(I.types)&&!I.types.includes(S.type);return M||L||k||X||b};if(typeof f=="object"&&f!==null)for(let S=0,I=f.length;S<I;++S){const M=f.item(S);if(!M){this.setFieldInvalid(t,n);break}if(N(M,v)){this.setFieldInvalid(t,n);break}}break}default:{if(typeof n.validator!="function"){console.error(`Validator for custom rule for [${t}] field should be a function. This field will be always invalid.`),this.setFieldInvalid(t,n);return}const v=n.validator(f,this.getCompatibleFields());if(typeof v!="boolean"&&typeof v!="function"&&console.error(`Validator return value for [${t}] field should be boolean or function. It will be cast to boolean.`),typeof v=="function")if(r)this.fields[t].asyncCheckPending=!0;else{this.fields[t].asyncCheckPending=!1;const N=v();if(!z(N)){console.error(`Validator function for custom rule for [${t}] field should return a Promise. This field will be always invalid.`),this.setFieldInvalid(t,n);return}return N.then(S=>{S||this.setFieldInvalid(t,n)}).catch(()=>{this.setFieldInvalid(t,n)})}v||this.setFieldInvalid(t,n)}}}isFormValid(){let t=!0;for(let a=0,n=Object.values(this.fields).length;a<n;++a){const r=Object.values(this.fields)[a];if(r.isValid===void 0){t=void 0;break}if(r.isValid===!1){t=!1;break}}for(let a=0,n=Object.values(this.groupFields).length;a<n;++a){const r=Object.values(this.groupFields)[a];if(r.isValid===void 0){t=void 0;break}if(r.isValid===!1){t=!1;break}}return t}validateField(t,a=!1){var n;const r=this.fields[t];r.isValid=!0;const u=[];return[...r.rules].reverse().forEach(f=>{const v=this.validateFieldRule(t,r.elem,f,a);z(v)&&u.push(v)}),r.isValid&&this.setFieldValid(t,(n=r.config)==null?void 0:n.successMessage),Promise.allSettled(u).finally(()=>{var f;a&&((f=this.onValidateCallback)==null||f.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}revalidateField(t){if(typeof t!="string"&&!V(t))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(t);return!a||!this.fields[a]?(console.error("Field not found. Check the field selector."),Promise.reject()):new Promise(n=>{this.validateField(a,!0).finally(()=>{this.clearFieldStyle(a),this.clearFieldLabel(a),this.renderFieldError(a,!0),n(!!this.fields[a].isValid)})})}revalidateGroup(t){if(typeof t!="string"&&!V(t))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(t);return!a||!this.groupFields[a]?(console.error("Group not found. Check the group selector."),Promise.reject()):new Promise(n=>{this.validateGroup(a).finally(()=>{this.clearFieldLabel(a),this.renderGroupError(a,!0),n(!!this.groupFields[a].isValid)})})}validateGroup(t,a=!1){const n=this.groupFields[t],r=[];return[...n.rules].reverse().forEach(u=>{const f=this.validateGroupRule(t,n.elems,u);z(f)&&r.push(f)}),Promise.allSettled(r).finally(()=>{var u;a&&((u=this.onValidateCallback)==null||u.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}focusInvalidField(){for(const t in this.fields){const a=this.fields[t];if(!a.isValid){setTimeout(()=>a.elem.focus(),0);break}}}afterSubmitValidation(t=!1){this.renderErrors(t),this.globalConfig.focusInvalidField&&this.focusInvalidField()}validate(t=!1){return new Promise(a=>{const n=[];Object.keys(this.fields).forEach(r=>{const u=this.validateField(r);z(u)&&n.push(u)}),Object.keys(this.groupFields).forEach(r=>{const u=this.validateGroup(r);z(u)&&n.push(u)}),Promise.allSettled(n).then(()=>{var r;this.afterSubmitValidation(t),(r=this.onValidateCallback)==null||r.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}),a(!!n.length)})})}revalidate(){return new Promise(t=>{this.validateHandler(void 0,!0).finally(()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),t(this.isValid)})})}validateHandler(t,a=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(a).finally(()=>{var n,r,u;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?((n=this.onSuccessCallback)==null||n.call(this,t),this.globalConfig.submitFormAutomatically&&((r=t==null?void 0:t.currentTarget)==null||r.submit())):(u=this.onFailCallback)==null||u.call(this,this.getCompatibleFields(),this.groupFields)})}setForm(t){this.form=t,this.form.setAttribute("novalidate","novalidate"),this.removeListener("submit",this.form,this.formSubmitHandler),this.addListener("submit",this.form,this.formSubmitHandler)}addListener(t,a,n){a.addEventListener(t,n),this.eventListeners.push({type:t,elem:a,func:n})}removeListener(t,a,n){a.removeEventListener(t,n),this.eventListeners=this.eventListeners.filter(r=>r.type!==t||r.elem!==a)}addField(t,a,n){if(typeof t!="string"&&!V(t))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");let r;if(typeof t=="string"?r=this.form.querySelector(t):r=t,!r)throw Error("Field doesn't exist in the DOM! Please check the field selector.");if(!Array.isArray(a)||!a.length)throw Error("Rules argument should be an array and should contain at least 1 element.");a.forEach(f=>{if(!("rule"in f||"validator"in f||"plugin"in f))throw Error("Rules argument must contain at least one rule or validator property.");if(!f.validator&&!f.plugin&&(!f.rule||!Object.values(x).includes(f.rule)))throw Error(`Rule should be one of these types: ${Object.values(x).join(", ")}. Provided value: ${f.rule}`)});const u=this.setKeyByFieldSelector(t);return this.fields[u]={elem:r,rules:a,isValid:void 0,touched:!1,config:n},this.setListeners(r),(this.isSubmitted||this.globalConfig.validateBeforeSubmitting)&&this.validateField(u),this}removeField(t){if(typeof t!="string"&&!V(t))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(t);if(!a||!this.fields[a])return console.error("Field not found. Check the field selector."),this;const n=this.getListenerType(this.fields[a].elem.type);return this.removeListener(n,this.fields[a].elem,this.handlerChange),this.clearErrors(),delete this.fields[a],this}removeGroup(t){if(typeof t!="string")throw Error("Group selector is not valid. Please specify a string selector.");const a=this.getKeyByFieldSelector(t);return!a||!this.groupFields[a]?(console.error("Group not found. Check the group selector."),this):(this.groupFields[a].elems.forEach(n=>{const r=this.getListenerType(n.type);this.removeListener(r,n,this.handlerChange)}),this.clearErrors(),delete this.groupFields[a],this)}addRequiredGroup(t,a,n,r){if(typeof t!="string"&&!V(t))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");let u;if(typeof t=="string"?u=this.form.querySelector(t):u=t,!u)throw Error("Group selector not found! Please check the group selector.");const f=u.querySelectorAll("input"),v=Array.from(f).filter(S=>{const I=ge(this.groupFields,me(S));return I?I[1].elems.find(M=>M!==S):!0}),N=this.setKeyByFieldSelector(t);return this.groupFields[N]={rules:[{rule:B.Required,errorMessage:a,successMessage:r}],groupElem:u,elems:v,touched:!1,isValid:void 0,config:n},f.forEach(S=>{this.setListeners(S)}),this}getListenerType(t){switch(t){case"checkbox":case"select-one":case"file":case"radio":return"change";default:return"input"}}setListeners(t){const a=this.getListenerType(t.type);this.removeListener(a,t,this.handlerChange),this.addListener(a,t,this.handlerChange)}clearFieldLabel(t){var a,n;(a=this.errorLabels[t])==null||a.remove(),(n=this.successLabels[t])==null||n.remove()}clearFieldStyle(t){var a,n,r,u;const f=this.fields[t],v=((a=f.config)==null?void 0:a.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(v).forEach(S=>{f.elem.style[S]=""});const N=((n=f.config)==null?void 0:n.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(N).forEach(S=>{f.elem.style[S]=""}),f.elem.classList.remove(...P(((r=f.config)==null?void 0:r.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...P(((u=f.config)==null?void 0:u.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){var t,a;Object.keys(this.errorLabels).forEach(n=>this.errorLabels[n].remove()),Object.keys(this.successLabels).forEach(n=>this.successLabels[n].remove());for(const n in this.fields)this.clearFieldStyle(n);for(const n in this.groupFields){const r=this.groupFields[n],u=((t=r.config)==null?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(u).forEach(v=>{r.elems.forEach(N=>{var S;N.style[v]="",N.classList.remove(...P(((S=r.config)==null?void 0:S.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))})});const f=((a=r.config)==null?void 0:a.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(f).forEach(v=>{r.elems.forEach(N=>{var S;N.style[v]="",N.classList.remove(...P(((S=r.config)==null?void 0:S.successFieldCssClass)||this.globalConfig.successFieldCssClass))})})}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){const t=this.form.querySelectorAll("input, textarea, button, select");for(let a=0,n=t.length;a<n;++a)t[a].setAttribute("data-just-validate-fallback-disabled",t[a].disabled?"true":"false"),t[a].setAttribute("disabled","disabled"),t[a].style.pointerEvents="none",t[a].style.webkitFilter="grayscale(100%)",t[a].style.filter="grayscale(100%)"}unlockForm(){const t=this.form.querySelectorAll("input, textarea, button, select");for(let a=0,n=t.length;a<n;++a)t[a].getAttribute("data-just-validate-fallback-disabled")!=="true"&&t[a].removeAttribute("disabled"),t[a].style.pointerEvents="",t[a].style.webkitFilter="",t[a].style.filter=""}renderTooltip(t,a,n){var r;const{top:u,left:f,width:v,height:N}=t.getBoundingClientRect(),S=a.getBoundingClientRect(),I=n||((r=this.globalConfig.tooltip)==null?void 0:r.position);switch(I){case"left":{a.style.top=`${u+N/2-S.height/2}px`,a.style.left=`${f-S.width-j}px`;break}case"top":{a.style.top=`${u-S.height-j}px`,a.style.left=`${f+v/2-S.width/2}px`;break}case"right":{a.style.top=`${u+N/2-S.height/2}px`,a.style.left=`${f+v+j}px`;break}case"bottom":{a.style.top=`${u+N+j}px`,a.style.left=`${f+v/2-S.width/2}px`;break}}return a.dataset.direction=I,{refresh:()=>{this.renderTooltip(t,a,n)}}}createErrorLabelElem(t,a,n){const r=document.createElement("div");r.innerHTML=a;const u=this.isTooltip()?n==null?void 0:n.errorLabelStyle:(n==null?void 0:n.errorLabelStyle)||this.globalConfig.errorLabelStyle;return Object.assign(r.style,u),r.classList.add(...P((n==null?void 0:n.errorLabelCssClass)||this.globalConfig.errorLabelCssClass),"just-validate-error-label"),this.isTooltip()&&(r.dataset.tooltip="true"),this.globalConfig.testingMode&&(r.dataset.testId=`error-label-${t}`),this.errorLabels[t]=r,r}createSuccessLabelElem(t,a,n){if(a===void 0)return null;const r=document.createElement("div");r.innerHTML=a;const u=(n==null?void 0:n.successLabelStyle)||this.globalConfig.successLabelStyle;return Object.assign(r.style,u),r.classList.add(...P((n==null?void 0:n.successLabelCssClass)||this.globalConfig.successLabelCssClass),"just-validate-success-label"),this.globalConfig.testingMode&&(r.dataset.testId=`success-label-${t}`),this.successLabels[t]=r,r}renderErrorsContainer(t,a){const n=a||this.globalConfig.errorsContainer;if(typeof n=="string"){const r=this.form.querySelector(n);if(r)return r.appendChild(t),!0;console.error(`Error container with ${n} selector not found. Errors will be rendered as usual`)}return n instanceof Element?(n.appendChild(t),!0):(n!==void 0&&console.error("Error container not found. It should be a string or existing Element. Errors will be rendered as usual"),!1)}renderGroupLabel(t,a,n,r){!r&&this.renderErrorsContainer(a,n)||t.appendChild(a)}renderFieldLabel(t,a,n,r){var u,f,v,N,S,I,M;if(!(!r&&this.renderErrorsContainer(a,n)))if(t.type==="checkbox"||t.type==="radio"){const L=document.querySelector(`label[for="${t.getAttribute("id")}"]`);((f=(u=t.parentElement)==null?void 0:u.tagName)==null?void 0:f.toLowerCase())==="label"?(N=(v=t.parentElement)==null?void 0:v.parentElement)==null||N.appendChild(a):L?(S=L.parentElement)==null||S.appendChild(a):(I=t.parentElement)==null||I.appendChild(a)}else(M=t.parentElement)==null||M.appendChild(a)}showLabels(t,a){Object.keys(t).forEach((n,r)=>{const u=t[n],f=this.getKeyByFieldSelector(n);if(!f||!this.fields[f]){console.error("Field not found. Check the field selector.");return}const v=this.fields[f];v.isValid=!a,this.clearFieldStyle(f),this.clearFieldLabel(f),this.renderFieldError(f,!1,u),r===0&&this.globalConfig.focusInvalidField&&setTimeout(()=>v.elem.focus(),0)})}showErrors(t){if(typeof t!="object")throw Error("[showErrors]: Errors should be an object with key: value format");this.showLabels(t,!0)}showSuccessLabels(t){if(typeof t!="object")throw Error("[showSuccessLabels]: Labels should be an object with key: value format");this.showLabels(t,!1)}renderFieldError(t,a=!1,n){var r,u,f,v,N,S;const I=this.fields[t];if(I.isValid===!1&&(this.isValid=!1),I.isValid===void 0||!a&&!this.isSubmitted&&!I.touched&&n===void 0)return;if(I.isValid){if(!I.asyncCheckPending){const L=this.createSuccessLabelElem(t,n!==void 0?n:I.successMessage,I.config);L&&this.renderFieldLabel(I.elem,L,(r=I.config)==null?void 0:r.errorsContainer,!0),I.elem.classList.add(...P(((u=I.config)==null?void 0:u.successFieldCssClass)||this.globalConfig.successFieldCssClass))}return}I.elem.classList.add(...P(((f=I.config)==null?void 0:f.errorFieldCssClass)||this.globalConfig.errorFieldCssClass));const M=this.createErrorLabelElem(t,n!==void 0?n:I.errorMessage,I.config);this.renderFieldLabel(I.elem,M,(v=I.config)==null?void 0:v.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(I.elem,M,(S=(N=I.config)==null?void 0:N.tooltip)==null?void 0:S.position))}renderGroupError(t,a=!0){var n,r,u,f;const v=this.groupFields[t];if(v.isValid===!1&&(this.isValid=!1),v.isValid===void 0||!a&&!this.isSubmitted&&!v.touched)return;if(v.isValid){v.elems.forEach(I=>{var M,L;Object.assign(I.style,((M=v.config)==null?void 0:M.successFieldStyle)||this.globalConfig.successFieldStyle),I.classList.add(...P(((L=v.config)==null?void 0:L.successFieldCssClass)||this.globalConfig.successFieldCssClass))});const S=this.createSuccessLabelElem(t,v.successMessage,v.config);S&&this.renderGroupLabel(v.groupElem,S,(n=v.config)==null?void 0:n.errorsContainer,!0);return}this.isValid=!1,v.elems.forEach(S=>{var I,M;Object.assign(S.style,((I=v.config)==null?void 0:I.errorFieldStyle)||this.globalConfig.errorFieldStyle),S.classList.add(...P(((M=v.config)==null?void 0:M.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))});const N=this.createErrorLabelElem(t,v.errorMessage,v.config);this.renderGroupLabel(v.groupElem,N,(r=v.config)==null?void 0:r.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(v.groupElem,N,(f=(u=v.config)==null?void 0:u.tooltip)==null?void 0:f.position))}renderErrors(t=!1){if(!(!this.isSubmitted&&!t&&!this.globalConfig.validateBeforeSubmitting)){this.clearErrors(),this.isValid=!0;for(const a in this.groupFields)this.renderGroupError(a);for(const a in this.fields)this.renderFieldError(a)}}destroy(){this.eventListeners.forEach(t=>{this.removeListener(t.type,t.elem,t.func)}),Object.keys(this.customStyleTags).forEach(t=>{this.customStyleTags[t].remove()}),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach(t=>{const a=this.getFieldSelectorByKey(t);a&&this.addField(a,[...this.fields[t].rules],this.fields[t].config)})):console.error("Cannot initialize the library! Form is not defined")}setCurrentLocale(t){if(typeof t!="string"&&t!==void 0){console.error("Current locale should be a string");return}this.currentLocale=t,this.isSubmitted&&this.validate()}onSuccess(t){return this.onSuccessCallback=t,this}onFail(t){return this.onFailCallback=t,this}onValidate(t){return this.onValidateCallback=t,this}}var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var U={exports:{}};(function(m,t){(function(a,n){m.exports=n(a)})(typeof W<"u"?W:window||W.window||W.global,function(a){var n={},r="iziToast";document.querySelector("body");var u=!!/Mobi/.test(navigator.userAgent),f=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),v=typeof InstallTrigger<"u",N="ontouchstart"in document.documentElement,S=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],I={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},M=568,L={};n.children={};var k={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var X=function(c,l){l=l||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(c,l.bubbles,l.cancelable,l.detail),i};X.prototype=window.Event.prototype,window.CustomEvent=X}var b=function(c,l,i){if(Object.prototype.toString.call(c)==="[object Object]")for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&l.call(i,c[s],s,c);else if(c)for(var y=0,w=c.length;y<w;y++)l.call(i,c[y],y,c)},p=function(c,l){var i={};return b(c,function(s,y){i[y]=c[y]}),b(l,function(s,y){i[y]=l[y]}),i},e=function(c){var l=document.createDocumentFragment(),i=document.createElement("div");for(i.innerHTML=c;i.firstChild;)l.appendChild(i.firstChild);return l},o=function(c){var l=btoa(encodeURIComponent(c));return l.replace(/=/g,"")},d=function(c){return c.substring(0,1)=="#"||c.substring(0,3)=="rgb"||c.substring(0,3)=="hsl"},g=function(c){try{return btoa(atob(c))==c}catch{return!1}},C=function(){return{move:function(c,l,i,s){var y,w=.3,h=180;s!==0&&(c.classList.add(r+"-dragged"),c.style.transform="translateX("+s+"px)",s>0?(y=(h-s)/h,y<w&&l.hide(p(i,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),c,"drag")):(y=(h+s)/h,y<w&&l.hide(p(i,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),c,"drag")),c.style.opacity=y,y<w&&((f||v)&&(c.style.left=s+"px"),c.parentNode.style.opacity=w,this.stopMoving(c,null)))},startMoving:function(c,l,i,s){s=s||window.event;var y=N?s.touches[0].clientX:s.clientX,w=c.style.transform.replace("px)","");w=w.replace("translateX(","");var h=y-w;i.transitionIn&&c.classList.remove(i.transitionIn),i.transitionInMobile&&c.classList.remove(i.transitionInMobile),c.style.transition="",N?document.ontouchmove=function(E){E.preventDefault(),E=E||window.event;var O=E.touches[0].clientX,T=O-h;C.move(c,l,i,T)}:document.onmousemove=function(E){E.preventDefault(),E=E||window.event;var O=E.clientX,T=O-h;C.move(c,l,i,T)}},stopMoving:function(c,l){N?document.ontouchmove=function(){}:document.onmousemove=function(){},c.style.opacity="",c.style.transform="",c.classList.contains(r+"-dragged")&&(c.classList.remove(r+"-dragged"),c.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){c.style.transition=""},400))}}}();return n.setSetting=function(c,l,i){n.children[c][l]=i},n.getSetting=function(c,l){return n.children[c][l]},n.destroy=function(){b(document.querySelectorAll("."+r+"-overlay"),function(c,l){c.remove()}),b(document.querySelectorAll("."+r+"-wrapper"),function(c,l){c.remove()}),b(document.querySelectorAll("."+r),function(c,l){c.remove()}),this.children={},document.removeEventListener(r+"-opened",{},!1),document.removeEventListener(r+"-opening",{},!1),document.removeEventListener(r+"-closing",{},!1),document.removeEventListener(r+"-closed",{},!1),document.removeEventListener("keyup",{},!1),L={}},n.settings=function(c){n.destroy(),L=c,k=p(k,c||{})},b(I,function(c,l){n[l]=function(i){var s=p(L,i||{});s=p(c,s||{}),this.show(s)}}),n.progress=function(c,l,i){var s=this,y=l.getAttribute("data-iziToast-ref"),w=p(this.children[y],c||{}),h=l.querySelector("."+r+"-progressbar div");return{start:function(){typeof w.time.REMAINING>"u"&&(l.classList.remove(r+"-reseted"),h!==null&&(h.style.transition="width "+w.timeout+"ms "+w.progressBarEasing,h.style.width="0%"),w.time.START=new Date().getTime(),w.time.END=w.time.START+w.timeout,w.time.TIMER=setTimeout(function(){clearTimeout(w.time.TIMER),l.classList.contains(r+"-closing")||(s.hide(w,l,"timeout"),typeof i=="function"&&i.apply(s))},w.timeout),s.setSetting(y,"time",w.time))},pause:function(){if(typeof w.time.START<"u"&&!l.classList.contains(r+"-paused")&&!l.classList.contains(r+"-reseted")){if(l.classList.add(r+"-paused"),w.time.REMAINING=w.time.END-new Date().getTime(),clearTimeout(w.time.TIMER),s.setSetting(y,"time",w.time),h!==null){var E=window.getComputedStyle(h),O=E.getPropertyValue("width");h.style.transition="none",h.style.width=O}typeof i=="function"&&setTimeout(function(){i.apply(s)},10)}},resume:function(){typeof w.time.REMAINING<"u"?(l.classList.remove(r+"-paused"),h!==null&&(h.style.transition="width "+w.time.REMAINING+"ms "+w.progressBarEasing,h.style.width="0%"),w.time.END=new Date().getTime()+w.time.REMAINING,w.time.TIMER=setTimeout(function(){clearTimeout(w.time.TIMER),l.classList.contains(r+"-closing")||(s.hide(w,l,"timeout"),typeof i=="function"&&i.apply(s))},w.time.REMAINING),s.setSetting(y,"time",w.time)):this.start()},reset:function(){clearTimeout(w.time.TIMER),delete w.time.REMAINING,s.setSetting(y,"time",w.time),l.classList.add(r+"-reseted"),l.classList.remove(r+"-paused"),h!==null&&(h.style.transition="none",h.style.width="100%"),typeof i=="function"&&setTimeout(function(){i.apply(s)},10)}}},n.hide=function(c,l,i){typeof l!="object"&&(l=document.querySelector(l));var s=this,y=p(this.children[l.getAttribute("data-iziToast-ref")],c||{});y.closedBy=i||null,delete y.time.REMAINING,l.classList.add(r+"-closing"),function(){var E=document.querySelector("."+r+"-overlay");if(E!==null){var O=E.getAttribute("data-iziToast-ref");O=O.split(",");var T=O.indexOf(String(y.ref));T!==-1&&O.splice(T,1),E.setAttribute("data-iziToast-ref",O.join()),O.length===0&&(E.classList.remove("fadeIn"),E.classList.add("fadeOut"),setTimeout(function(){E.remove()},700))}}(),y.transitionIn&&l.classList.remove(y.transitionIn),y.transitionInMobile&&l.classList.remove(y.transitionInMobile),u||window.innerWidth<=M?y.transitionOutMobile&&l.classList.add(y.transitionOutMobile):y.transitionOut&&l.classList.add(y.transitionOut);var w=l.parentNode.offsetHeight;l.parentNode.style.height=w+"px",l.style.pointerEvents="none",(!u||window.innerWidth>M)&&(l.parentNode.style.transitionDelay="0.2s");try{var h=new CustomEvent(r+"-closing",{detail:y,bubbles:!0,cancelable:!0});document.dispatchEvent(h)}catch(E){console.warn(E)}setTimeout(function(){l.parentNode.style.height="0px",l.parentNode.style.overflow="",setTimeout(function(){delete s.children[y.ref],l.parentNode.remove();try{var E=new CustomEvent(r+"-closed",{detail:y,bubbles:!0,cancelable:!0});document.dispatchEvent(E)}catch(O){console.warn(O)}typeof y.onClosed<"u"&&y.onClosed.apply(null,[y,l,i])},1e3)},200),typeof y.onClosing<"u"&&y.onClosing.apply(null,[y,l,i])},n.show=function(c){var l=this,i=p(L,c||{});if(i=p(k,i),i.time={},i.id===null&&(i.id=o(i.title+i.message+i.color)),i.displayMode===1||i.displayMode=="once")try{if(document.querySelectorAll("."+r+"#"+i.id).length>0)return!1}catch{console.warn("["+r+"] Could not find an element with this selector: #"+i.id+". Try to set an valid id.")}if(i.displayMode===2||i.displayMode=="replace")try{b(document.querySelectorAll("."+r+"#"+i.id),function(h,E){l.hide(i,h,"replaced")})}catch{console.warn("["+r+"] Could not find an element with this selector: #"+i.id+". Try to set an valid id.")}i.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),n.children[i.ref]=i;var s={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:i.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};s.toast.setAttribute("data-iziToast-ref",i.ref),s.toast.appendChild(s.toastBody),s.toastCapsule.appendChild(s.toast),function(){if(s.toast.classList.add(r),s.toast.classList.add(r+"-opening"),s.toastCapsule.classList.add(r+"-capsule"),s.toastBody.classList.add(r+"-body"),s.toastTexts.classList.add(r+"-texts"),u||window.innerWidth<=M?i.transitionInMobile&&s.toast.classList.add(i.transitionInMobile):i.transitionIn&&s.toast.classList.add(i.transitionIn),i.class){var h=i.class.split(" ");b(h,function(E,O){s.toast.classList.add(E)})}i.id&&(s.toast.id=i.id),i.rtl&&(s.toast.classList.add(r+"-rtl"),s.toast.setAttribute("dir","rtl")),i.layout>1&&s.toast.classList.add(r+"-layout"+i.layout),i.balloon&&s.toast.classList.add(r+"-balloon"),i.maxWidth&&(isNaN(i.maxWidth)?s.toast.style.maxWidth=i.maxWidth:s.toast.style.maxWidth=i.maxWidth+"px"),(i.theme!==""||i.theme!=="light")&&s.toast.classList.add(r+"-theme-"+i.theme),i.color&&(d(i.color)?s.toast.style.background=i.color:s.toast.classList.add(r+"-color-"+i.color)),i.backgroundColor&&(s.toast.style.background=i.backgroundColor,i.balloon&&(s.toast.style.borderColor=i.backgroundColor))}(),function(){i.image&&(s.cover.classList.add(r+"-cover"),s.cover.style.width=i.imageWidth+"px",g(i.image.replace(/ /g,""))?s.cover.style.backgroundImage="url(data:image/png;base64,"+i.image.replace(/ /g,"")+")":s.cover.style.backgroundImage="url("+i.image+")",i.rtl?s.toastBody.style.marginRight=i.imageWidth+10+"px":s.toastBody.style.marginLeft=i.imageWidth+10+"px",s.toast.appendChild(s.cover))}(),function(){i.close?(s.buttonClose=document.createElement("button"),s.buttonClose.type="button",s.buttonClose.classList.add(r+"-close"),s.buttonClose.addEventListener("click",function(h){h.target,l.hide(i,s.toast,"button")}),s.toast.appendChild(s.buttonClose)):i.rtl?s.toast.style.paddingLeft="18px":s.toast.style.paddingRight="18px"}(),function(){i.progressBar&&(s.progressBar=document.createElement("div"),s.progressBarDiv=document.createElement("div"),s.progressBar.classList.add(r+"-progressbar"),s.progressBarDiv.style.background=i.progressBarColor,s.progressBar.appendChild(s.progressBarDiv),s.toast.appendChild(s.progressBar)),i.timeout&&(i.pauseOnHover&&!i.resetOnHover&&(s.toast.addEventListener("mouseenter",function(h){l.progress(i,s.toast).pause()}),s.toast.addEventListener("mouseleave",function(h){l.progress(i,s.toast).resume()})),i.resetOnHover&&(s.toast.addEventListener("mouseenter",function(h){l.progress(i,s.toast).reset()}),s.toast.addEventListener("mouseleave",function(h){l.progress(i,s.toast).start()})))}(),function(){i.iconUrl?(s.icon.setAttribute("class",r+"-icon"),s.icon.setAttribute("src",i.iconUrl)):i.icon&&(s.icon.setAttribute("class",r+"-icon "+i.icon),i.iconText&&s.icon.appendChild(document.createTextNode(i.iconText)),i.iconColor&&(s.icon.style.color=i.iconColor)),(i.icon||i.iconUrl)&&(i.rtl?s.toastBody.style.paddingRight="33px":s.toastBody.style.paddingLeft="33px",s.toastBody.appendChild(s.icon))}(),function(){i.title.length>0&&(s.strong=document.createElement("strong"),s.strong.classList.add(r+"-title"),s.strong.appendChild(e(i.title)),s.toastTexts.appendChild(s.strong),i.titleColor&&(s.strong.style.color=i.titleColor),i.titleSize&&(isNaN(i.titleSize)?s.strong.style.fontSize=i.titleSize:s.strong.style.fontSize=i.titleSize+"px"),i.titleLineHeight&&(isNaN(i.titleSize)?s.strong.style.lineHeight=i.titleLineHeight:s.strong.style.lineHeight=i.titleLineHeight+"px")),i.message.length>0&&(s.p=document.createElement("p"),s.p.classList.add(r+"-message"),s.p.appendChild(e(i.message)),s.toastTexts.appendChild(s.p),i.messageColor&&(s.p.style.color=i.messageColor),i.messageSize&&(isNaN(i.titleSize)?s.p.style.fontSize=i.messageSize:s.p.style.fontSize=i.messageSize+"px"),i.messageLineHeight&&(isNaN(i.titleSize)?s.p.style.lineHeight=i.messageLineHeight:s.p.style.lineHeight=i.messageLineHeight+"px")),i.title.length>0&&i.message.length>0&&(i.rtl?s.strong.style.marginLeft="10px":i.layout!==2&&!i.rtl&&(s.strong.style.marginRight="10px"))}(),s.toastBody.appendChild(s.toastTexts);var y;(function(){i.inputs.length>0&&(s.inputs.classList.add(r+"-inputs"),b(i.inputs,function(h,E){s.inputs.appendChild(e(h[0])),y=s.inputs.childNodes,y[E].classList.add(r+"-inputs-child"),h[3]&&setTimeout(function(){y[E].focus()},300),y[E].addEventListener(h[1],function(O){var T=h[2];return T(l,s.toast,this,O)})}),s.toastBody.appendChild(s.inputs))})(),function(){i.buttons.length>0&&(s.buttons.classList.add(r+"-buttons"),b(i.buttons,function(h,E){s.buttons.appendChild(e(h[0]));var O=s.buttons.childNodes;O[E].classList.add(r+"-buttons-child"),h[2]&&setTimeout(function(){O[E].focus()},300),O[E].addEventListener("click",function(T){T.preventDefault();var D=h[1];return D(l,s.toast,this,T,y)})})),s.toastBody.appendChild(s.buttons)}(),i.message.length>0&&(i.inputs.length>0||i.buttons.length>0)&&(s.p.style.marginBottom="0"),(i.inputs.length>0||i.buttons.length>0)&&(i.rtl?s.toastTexts.style.marginLeft="10px":s.toastTexts.style.marginRight="10px",i.inputs.length>0&&i.buttons.length>0&&(i.rtl?s.inputs.style.marginLeft="8px":s.inputs.style.marginRight="8px")),function(){s.toastCapsule.style.visibility="hidden",setTimeout(function(){var h=s.toast.offsetHeight,E=s.toast.currentStyle||window.getComputedStyle(s.toast),O=E.marginTop;O=O.split("px"),O=parseInt(O[0]);var T=E.marginBottom;T=T.split("px"),T=parseInt(T[0]),s.toastCapsule.style.visibility="",s.toastCapsule.style.height=h+T+O+"px",setTimeout(function(){s.toastCapsule.style.height="auto",i.target&&(s.toastCapsule.style.overflow="visible")},500),i.timeout&&l.progress(i,s.toast).start()},100)}(),function(){var h=i.position;if(i.target)s.wrapper=document.querySelector(i.target),s.wrapper.classList.add(r+"-target"),i.targetFirst?s.wrapper.insertBefore(s.toastCapsule,s.wrapper.firstChild):s.wrapper.appendChild(s.toastCapsule);else{if(S.indexOf(i.position)==-1){console.warn("["+r+`] Incorrect position.
It can be › `+S);return}u||window.innerWidth<=M?i.position=="bottomLeft"||i.position=="bottomRight"||i.position=="bottomCenter"?h=r+"-wrapper-bottomCenter":i.position=="topLeft"||i.position=="topRight"||i.position=="topCenter"?h=r+"-wrapper-topCenter":h=r+"-wrapper-center":h=r+"-wrapper-"+h,s.wrapper=document.querySelector("."+r+"-wrapper."+h),s.wrapper||(s.wrapper=document.createElement("div"),s.wrapper.classList.add(r+"-wrapper"),s.wrapper.classList.add(h),document.body.appendChild(s.wrapper)),i.position=="topLeft"||i.position=="topCenter"||i.position=="topRight"?s.wrapper.insertBefore(s.toastCapsule,s.wrapper.firstChild):s.wrapper.appendChild(s.toastCapsule)}isNaN(i.zindex)?console.warn("["+r+"] Invalid zIndex."):s.wrapper.style.zIndex=i.zindex}(),function(){i.overlay&&(document.querySelector("."+r+"-overlay.fadeIn")!==null?(s.overlay=document.querySelector("."+r+"-overlay"),s.overlay.setAttribute("data-iziToast-ref",s.overlay.getAttribute("data-iziToast-ref")+","+i.ref),!isNaN(i.zindex)&&i.zindex!==null&&(s.overlay.style.zIndex=i.zindex-1)):(s.overlay.classList.add(r+"-overlay"),s.overlay.classList.add("fadeIn"),s.overlay.style.background=i.overlayColor,s.overlay.setAttribute("data-iziToast-ref",i.ref),!isNaN(i.zindex)&&i.zindex!==null&&(s.overlay.style.zIndex=i.zindex-1),document.querySelector("body").appendChild(s.overlay)),i.overlayClose?(s.overlay.removeEventListener("click",{}),s.overlay.addEventListener("click",function(h){l.hide(i,s.toast,"overlay")})):s.overlay.removeEventListener("click",{}))}(),function(){if(i.animateInside){s.toast.classList.add(r+"-animateInside");var h=[200,100,300];(i.transitionIn=="bounceInLeft"||i.transitionIn=="bounceInRight")&&(h=[400,200,400]),i.title.length>0&&setTimeout(function(){s.strong.classList.add("slideIn")},h[0]),i.message.length>0&&setTimeout(function(){s.p.classList.add("slideIn")},h[1]),(i.icon||i.iconUrl)&&setTimeout(function(){s.icon.classList.add("revealIn")},h[2]);var E=150;i.buttons.length>0&&s.buttons&&setTimeout(function(){b(s.buttons.childNodes,function(O,T){setTimeout(function(){O.classList.add("revealIn")},E),E=E+150})},i.inputs.length>0?150:0),i.inputs.length>0&&s.inputs&&(E=150,b(s.inputs.childNodes,function(O,T){setTimeout(function(){O.classList.add("revealIn")},E),E=E+150}))}}(),i.onOpening.apply(null,[i,s.toast]);try{var w=new CustomEvent(r+"-opening",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(w)}catch(h){console.warn(h)}setTimeout(function(){s.toast.classList.remove(r+"-opening"),s.toast.classList.add(r+"-opened");try{var h=new CustomEvent(r+"-opened",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(h)}catch(E){console.warn(E)}i.onOpened.apply(null,[i,s.toast])},1e3),i.drag&&(N?(s.toast.addEventListener("touchstart",function(h){C.startMoving(this,l,i,h)},!1),s.toast.addEventListener("touchend",function(h){C.stopMoving(this,h)},!1)):(s.toast.addEventListener("mousedown",function(h){h.preventDefault(),C.startMoving(this,l,i,h)},!1),s.toast.addEventListener("mouseup",function(h){h.preventDefault(),C.stopMoving(this,h)},!1))),i.closeOnEscape&&document.addEventListener("keyup",function(h){h=h||window.event,h.keyCode==27&&l.hide(i,s.toast,"esc")}),i.closeOnClick&&s.toast.addEventListener("click",function(h){l.hide(i,s.toast,"toast")}),l.toast=s.toast},n})})(U);var ye=U.exports;const be=Z(ye);var K={};/*!
	By André Rinas, www.andrerinas.de
	Documentation, www.simplelightbox.com
	Available for use under the MIT License
	Version 2.14.3
*/(function(m){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;function t(b){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(b)}function a(b,p){var e=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!e){if(Array.isArray(b)||(e=u(b))||p){e&&(b=e);var o=0,d=function(){};return{s:d,n:function(){return o>=b.length?{done:!0}:{done:!1,value:b[o++]}},e:function(i){throw i},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=!0,C=!1,c;return{s:function(){e=e.call(b)},n:function(){var i=e.next();return g=i.done,i},e:function(i){C=!0,c=i},f:function(){try{!g&&e.return!=null&&e.return()}finally{if(C)throw c}}}}function n(b){return v(b)||f(b)||u(b)||r()}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(b,p){if(b){if(typeof b=="string")return N(b,p);var e=Object.prototype.toString.call(b).slice(8,-1);if(e==="Object"&&b.constructor&&(e=b.constructor.name),e==="Map"||e==="Set")return Array.from(b);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return N(b,p)}}function f(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}function v(b){if(Array.isArray(b))return N(b)}function N(b,p){(p==null||p>b.length)&&(p=b.length);for(var e=0,o=new Array(p);e<p;e++)o[e]=b[e];return o}function S(b,p){if(!(b instanceof p))throw new TypeError("Cannot call a class as a function")}function I(b,p){for(var e=0;e<p.length;e++){var o=p[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(b,o.key,o)}}function M(b,p,e){return p&&I(b.prototype,p),Object.defineProperty(b,"prototype",{writable:!1}),b}function L(b,p,e){return p in b?Object.defineProperty(b,p,{value:e,enumerable:!0,configurable:!0,writable:!0}):b[p]=e,b}var k=function(){function b(p,e){var o=this;if(S(this,b),L(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp|avif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),L(this,"transitionPrefix",void 0),L(this,"isPassiveEventsSupported",void 0),L(this,"transitionCapable",!1),L(this,"isTouchDevice","ontouchstart"in window),L(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),L(this,"initialLocationHash",void 0),L(this,"pushStateSupport","pushState"in history),L(this,"isOpen",!1),L(this,"isAnimating",!1),L(this,"isClosing",!1),L(this,"isFadeIn",!1),L(this,"urlChangedOnce",!1),L(this,"hashReseted",!1),L(this,"historyHasChanges",!1),L(this,"historyUpdateTimeout",null),L(this,"currentImage",void 0),L(this,"eventNamespace","simplelightbox"),L(this,"domNodes",{}),L(this,"loadedImages",[]),L(this,"initialImageIndex",0),L(this,"currentImageIndex",0),L(this,"initialSelector",null),L(this,"globalScrollbarWidth",0),L(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,e),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof p=="string"?(this.initialSelector=p,this.elements=Array.from(document.querySelectorAll(p))):this.elements=typeof p.length<"u"&&p.length>0?Array.from(p):[p],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var d=[];this.elements=Array.from(this.elements).filter(function(g){var C=g.getAttribute(o.options.sourceAttr);return d.indexOf(C)===-1?(d.push(C),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(g){if(o.isValidLink(g.currentTarget)){if(g.preventDefault(),o.isAnimating)return!1;o.initialImageIndex=o.elements.indexOf(g.currentTarget),o.openImage(g.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(g){o.isOpen&&g.target===g.currentTarget&&o.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(g){g.target.parentElement.classList.contains("sl-image")&&g.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(g){if(o.controlCoordinates.swipeDiff=0,o.isAnimating&&g.key==="Escape"){o.currentImage.setAttribute("src",""),o.isAnimating=!1,o.close();return}o.isOpen&&(g.preventDefault(),g.key==="Escape"&&o.close(),!o.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(g.key)>-1&&o.loadImage(g.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return M(b,[{key:"checkPassiveEventsSupport",value:function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}catch{}return e}},{key:"getCaptionElement",value:function(e){if(this.options.captionSelector.startsWith("+")){var o=this.options.captionSelector.replace(/^\+/,"").trimStart(),d=e.nextElementSibling;return d&&d.matches(o)?d:!1}else if(this.options.captionSelector.startsWith(">")){var g=this.options.captionSelector.replace(/^>/,"").trimStart();return e.querySelector(g)}else return e.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(e){var o=e.tagName,d=e.id,g=e.className,C=e.parentNode;if(o==="HTML")return"HTML";var c=o;if(c+=d!==""?"#".concat(d):"",g)for(var l=g.trim().split(/\s/),i=0;i<l.length;i++)c+=".".concat(l[i]);for(var s=1,y=e;y.previousElementSibling;y=y.previousElementSibling)s+=1;return c+=":nth-child(".concat(s,")"),"".concat(this.generateQuerySelector(C)," > ").concat(c)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var e,o=this.options.captionClass.split(/[\s,]+/);(e=this.domNodes.caption.classList).add.apply(e,n(o))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(e,o){var d;return function(){d||(e.apply(this,arguments),d=!0,setTimeout(function(){return d=!1},o))}}},{key:"isValidLink",value:function(e){return!this.options.fileExt||e.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(e.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var e=(document.body||document.documentElement).style;return"transition"in e?"":"WebkitTransition"in e?"-webkit-":"MozTransition"in e?"-moz-":"OTransition"in e?"-o":!1}},{key:"getScrollbarWidth",value:function(){var e=0,o=document.createElement("div");return o.classList.add("sl-scrollbar-measure"),document.body.appendChild(o),e=o.offsetWidth-o.clientWidth,document.body.removeChild(o),e}},{key:"toggleScrollbar",value:function(e){var o=0,d=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(e==="hide"){var g=window.innerWidth;if(!g){var C=document.documentElement.getBoundingClientRect();g=C.right-Math.abs(C.left)}if(document.body.clientWidth<g||this.isAppleDevice){var c=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);o=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=c,(o>0||o==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=c+o+"px",d.forEach(function(l){var i=l.style.paddingRight,s=window.getComputedStyle(l)["padding-right"];l.dataset.originalPaddingRight=i,l.style.paddingRight="".concat(parseFloat(s)+o,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",d.forEach(function(l){var i=l.dataset.originalPaddingRight;typeof i<"u"&&(l.style.paddingRight=i)});return o}},{key:"close",value:function(){var e=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var o=this.relatedElements[this.currentImageIndex];o.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){e.options.disableScroll&&e.toggleScrollbar("show"),e.options.htmlClass&&e.options.htmlClass!==""&&document.querySelector("html").classList.remove(e.options.htmlClass),document.body.removeChild(e.domNodes.wrapper),e.options.overlay&&document.body.removeChild(e.domNodes.overlay),e.domNodes.additionalHtml=null,e.domNodes.download=null,o.dispatchEvent(new Event("closed.simplelightbox")),e.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var d in this.controlCoordinates)this.controlCoordinates[d]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var e=this,o=this.currentImageIndex,d=this.relatedElements.length,g=o+1<0?d-1:o+1>=d-1?0:o+1,C=o-1<0?d-1:o-1>=d-1?0:o-1,c=new Image,l=new Image;c.addEventListener("load",function(i){var s=i.target.getAttribute("src");e.loadedImages.indexOf(s)===-1&&e.loadedImages.push(s),e.relatedElements[o].dispatchEvent(new Event("nextImageLoaded."+e.eventNamespace))}),c.setAttribute("src",this.relatedElements[g].getAttribute(this.options.sourceAttr)),l.addEventListener("load",function(i){var s=i.target.getAttribute("src");e.loadedImages.indexOf(s)===-1&&e.loadedImages.push(s),e.relatedElements[o].dispatchEvent(new Event("prevImageLoaded."+e.eventNamespace))}),l.setAttribute("src",this.relatedElements[C].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(e){var o=this,d=e;this.options.rtl&&(e=-e),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((e===1?"next":"prev")+"."+this.eventNamespace));var g=this.currentImageIndex+e;if(this.isAnimating||(g<0||g>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=g<0?this.relatedElements.length-1:g>this.relatedElements.length-1?0:g,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*d-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){o.isAnimating=!0,o.isClosing?o.isAnimating=!1:setTimeout(function(){var C=o.relatedElements[o.currentImageIndex];o.currentImage&&(o.currentImage.setAttribute("src",C.getAttribute(o.options.sourceAttr)),o.loadedImages.indexOf(C.getAttribute(o.options.sourceAttr))===-1&&o.show(o.domNodes.spinner),o.domNodes.image.contains(o.domNodes.caption)&&o.domNodes.image.removeChild(o.domNodes.caption),o.adjustImage(d),o.options.preloading&&o.preload())},100)})}},{key:"adjustImage",value:function(e){var o=this;if(!this.currentImage)return!1;var d=new Image,g=window.innerWidth*this.options.widthRatio,C=window.innerHeight*this.options.heightRatio;d.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),d.addEventListener("error",function(c){o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("error."+o.eventNamespace)),o.isAnimating=!1,o.isOpen=!0,o.domNodes.spinner.style.display="none";var l=e===1||e===-1;if(o.initialImageIndex===o.currentImageIndex&&l)return o.close();o.options.alertError&&alert(o.options.alertErrorMessage),o.loadImage(l?e:1)}),d.addEventListener("load",function(c){typeof e<"u"&&(o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("changed."+o.eventNamespace)),o.relatedElements[o.currentImageIndex].dispatchEvent(new Event((e===1?"nextDone":"prevDone")+"."+o.eventNamespace))),o.options.history&&o.updateURL(),o.loadedImages.indexOf(o.currentImage.getAttribute("src"))===-1&&o.loadedImages.push(o.currentImage.getAttribute("src"));var l=c.target.width,i=c.target.height;if(o.options.scaleImageToRatio||l>g||i>C){var s=l/i>g/C?l/g:i/C;l/=s,i/=s}o.domNodes.image.style.top=(window.innerHeight-i)/2+"px",o.domNodes.image.style.left=(window.innerWidth-l-o.globalScrollbarWidth)/2+"px",o.domNodes.image.style.width=l+"px",o.domNodes.image.style.height=i+"px",o.domNodes.spinner.style.display="none",o.options.focus&&o.forceFocus(),o.fadeIn(o.currentImage,o.options.fadeSpeed,function(){o.options.focus&&o.domNodes.wrapper.focus()}),o.isOpen=!0;var y,w;typeof o.options.captionSelector=="string"?y=o.options.captionSelector==="self"?o.relatedElements[o.currentImageIndex]:o.getCaptionElement(o.relatedElements[o.currentImageIndex]):typeof o.options.captionSelector=="function"&&(y=o.options.captionSelector(o.relatedElements[o.currentImageIndex])),o.options.captions&&y&&(o.options.captionType==="data"?w=y.dataset[o.options.captionsData]:o.options.captionType==="text"?w=y.innerHTML:w=y.getAttribute(o.options.captionsData)),o.options.loop?o.relatedElements.length===1?o.hide(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):o.show(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(o.currentImageIndex===0&&o.hide(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex>=o.relatedElements.length-1&&o.hide(o.domNodes.navigation.querySelector(".sl-next")),o.currentImageIndex>0&&o.show(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex<o.relatedElements.length-1&&o.show(o.domNodes.navigation.querySelector(".sl-next"))),e===1||e===-1?(o.options.animationSlide&&(o.slide(0,100*e+"px"),setTimeout(function(){o.slide(o.options.animationSpeed/1e3,"0px")},50)),o.fadeIn(o.domNodes.image,o.options.fadeSpeed,function(){o.isAnimating=!1,o.setCaption(w,l)})):(o.isAnimating=!1,o.setCaption(w,l)),o.options.additionalHtml&&!o.domNodes.additionalHtml&&(o.domNodes.additionalHtml=document.createElement("div"),o.domNodes.additionalHtml.classList.add("sl-additional-html"),o.domNodes.additionalHtml.innerHTML=o.options.additionalHtml,o.domNodes.image.appendChild(o.domNodes.additionalHtml)),o.options.download&&o.domNodes.downloadLink.setAttribute("href",o.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(e,o,d){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+e+","+o+") scale("+d+")"}},{key:"minMax",value:function(e,o,d){return e<o?o:e>d?d:e}},{key:"setZoomData",value:function(e,o,d){this.currentImage.dataset.scale=e,this.currentImage.dataset.translateX=o,this.currentImage.dataset.translateY=d}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var e=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(d){e.isOpen&&e.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){e.addEventListener(window,"hashchange."+e.eventNamespace,function(d){e.isOpen&&e.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(d){if(!d.currentTarget.tagName.match(/button/i))return!0;d.preventDefault(),e.controlCoordinates.swipeDiff=0,e.loadImage(d.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var o=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(d){if(e.controlCoordinates.mousedown||e.isAnimating||e.isClosing||!e.isOpen)return!0;e.controlCoordinates.containerHeight==0&&(e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY));var g=d.delta||d.wheelDelta;g===void 0&&(g=d.detail),g=Math.max(-1,Math.min(1,g)),o+=g*e.options.scrollZoomFactor*o,o=Math.max(1,Math.min(e.options.maxZoom,o)),e.controlCoordinates.targetScale=o;var C=document.documentElement.scrollTop||document.body.scrollTop;e.controlCoordinates.pinchOffsetX=d.pageX,e.controlCoordinates.pinchOffsetY=d.pageY-C||0,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),e.controlCoordinates.targetScale>1?(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.setZoomData(e.controlCoordinates.targetScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(d){if(d.target.tagName==="A"&&d.type==="touchstart")return!0;if(d.type==="mousedown")d.preventDefault(),e.controlCoordinates.initialPointerOffsetX=d.clientX,e.controlCoordinates.initialPointerOffsetY=d.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY),e.controlCoordinates.capture=!0;else{if(e.controlCoordinates.touchCount=d.touches.length,e.controlCoordinates.initialPointerOffsetX=d.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=d.touches[0].clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.controlCoordinates.touchCount===1){if(!e.controlCoordinates.doubleTapped)e.controlCoordinates.doubleTapped=!0,setTimeout(function(){e.controlCoordinates.doubleTapped=!1},300);else return e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&e.currentImage.classList.remove("sl-transition")},200),!1;e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY)}else e.controlCoordinates.touchCount===2&&(e.controlCoordinates.initialPointerOffsetX2=d.touches[1].clientX,e.controlCoordinates.initialPointerOffsetY2=d.touches[1].clientY,e.controlCoordinates.initialOffsetX=parseFloat(e.currentImage.dataset.translateX),e.controlCoordinates.initialOffsetY=parseFloat(e.currentImage.dataset.translateY),e.controlCoordinates.pinchOffsetX=(e.controlCoordinates.initialPointerOffsetX+e.controlCoordinates.initialPointerOffsetX2)/2,e.controlCoordinates.pinchOffsetY=(e.controlCoordinates.initialPointerOffsetY+e.controlCoordinates.initialPointerOffsetY2)/2,e.controlCoordinates.initialPinchDistance=Math.sqrt((e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)*(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialPointerOffsetX2)+(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)*(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialPointerOffsetY2)));e.controlCoordinates.capture=!0}return e.controlCoordinates.mousedown?!0:(e.transitionCapable&&(e.controlCoordinates.imageLeft=parseInt(e.domNodes.image.style.left,10)),e.controlCoordinates.mousedown=!0,e.controlCoordinates.swipeDiff=0,e.controlCoordinates.swipeYDiff=0,e.controlCoordinates.swipeStart=d.pageX||d.touches[0].pageX,e.controlCoordinates.swipeYStart=d.pageY||d.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(d){if(!e.controlCoordinates.mousedown)return!0;if(d.type==="touchmove"){if(e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=d.touches[0].clientX,e.controlCoordinates.pointerOffsetY=d.touches[0].clientY,e.controlCoordinates.touchCount=d.touches.length,e.controlCoordinates.touchmoveCount++,e.controlCoordinates.touchCount>1?(e.controlCoordinates.pointerOffsetX2=d.touches[1].clientX,e.controlCoordinates.pointerOffsetY2=d.touches[1].clientY,e.controlCoordinates.targetPinchDistance=Math.sqrt((e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)*(e.controlCoordinates.pointerOffsetX-e.controlCoordinates.pointerOffsetX2)+(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)*(e.controlCoordinates.pointerOffsetY-e.controlCoordinates.pointerOffsetY2)),e.controlCoordinates.initialPinchDistance===null&&(e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance),Math.abs(e.controlCoordinates.initialPinchDistance-e.controlCoordinates.targetPinchDistance)>=1&&(e.controlCoordinates.targetScale=e.minMax(e.controlCoordinates.targetPinchDistance/e.controlCoordinates.initialPinchDistance*e.controlCoordinates.initialScale,1,e.options.maxZoom),e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.scaleDifference=e.controlCoordinates.targetScale-e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.initialOffsetX-(e.controlCoordinates.pinchOffsetX-e.controlCoordinates.containerOffsetX-e.controlCoordinates.containerWidth/2-e.controlCoordinates.initialOffsetX)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.initialOffsetY-(e.controlCoordinates.pinchOffsetY-e.controlCoordinates.containerOffsetY-e.controlCoordinates.containerHeight/2-e.controlCoordinates.initialOffsetY)/(e.controlCoordinates.targetScale-e.controlCoordinates.scaleDifference)*e.controlCoordinates.scaleDifference,e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale),e.controlCoordinates.targetScale>1&&(e.controlCoordinates.zoomed=!0,(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=e.controlCoordinates.targetPinchDistance,e.controlCoordinates.initialScale=e.controlCoordinates.targetScale,e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY)):(e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale))}if(d.type==="mousemove"&&e.controlCoordinates.mousedown){if(d.type=="touchmove")return!0;if(d.preventDefault(),e.controlCoordinates.capture===!1)return!1;e.controlCoordinates.pointerOffsetX=d.clientX,e.controlCoordinates.pointerOffsetY=d.clientY,e.controlCoordinates.targetScale=e.controlCoordinates.initialScale,e.controlCoordinates.limitOffsetX=(e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale-e.controlCoordinates.containerWidth)/2,e.controlCoordinates.limitOffsetY=(e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale-e.controlCoordinates.containerHeight)/2,e.controlCoordinates.targetOffsetX=e.controlCoordinates.imgWidth*e.controlCoordinates.targetScale<=e.controlCoordinates.containerWidth?0:e.minMax(e.controlCoordinates.pointerOffsetX-(e.controlCoordinates.initialPointerOffsetX-e.controlCoordinates.initialOffsetX),e.controlCoordinates.limitOffsetX*-1,e.controlCoordinates.limitOffsetX),e.controlCoordinates.targetOffsetY=e.controlCoordinates.imgHeight*e.controlCoordinates.targetScale<=e.controlCoordinates.containerHeight?0:e.minMax(e.controlCoordinates.pointerOffsetY-(e.controlCoordinates.initialPointerOffsetY-e.controlCoordinates.initialOffsetY),e.controlCoordinates.limitOffsetY*-1,e.controlCoordinates.limitOffsetY),Math.abs(e.controlCoordinates.targetOffsetX)===Math.abs(e.controlCoordinates.limitOffsetX)&&(e.controlCoordinates.initialOffsetX=e.controlCoordinates.targetOffsetX,e.controlCoordinates.initialPointerOffsetX=e.controlCoordinates.pointerOffsetX),Math.abs(e.controlCoordinates.targetOffsetY)===Math.abs(e.controlCoordinates.limitOffsetY)&&(e.controlCoordinates.initialOffsetY=e.controlCoordinates.targetOffsetY,e.controlCoordinates.initialPointerOffsetY=e.controlCoordinates.pointerOffsetY),e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.zoomPanElement(e.controlCoordinates.targetOffsetX+"px",e.controlCoordinates.targetOffsetY+"px",e.controlCoordinates.targetScale)}e.controlCoordinates.zoomed||(e.controlCoordinates.swipeEnd=d.pageX||d.touches[0].pageX,e.controlCoordinates.swipeYEnd=d.pageY||d.touches[0].pageY,e.controlCoordinates.swipeDiff=e.controlCoordinates.swipeStart-e.controlCoordinates.swipeEnd,e.controlCoordinates.swipeYDiff=e.controlCoordinates.swipeYStart-e.controlCoordinates.swipeYEnd,e.options.animationSlide&&e.slide(0,-e.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(d){if(e.isTouchDevice&&d.type==="touchend"&&(e.controlCoordinates.touchCount=d.touches.length,e.controlCoordinates.touchCount===0?(e.currentImage&&e.setZoomData(e.controlCoordinates.initialScale,e.controlCoordinates.targetOffsetX,e.controlCoordinates.targetOffsetY),e.controlCoordinates.initialScale===1&&(e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)),e.controlCoordinates.initialPinchDistance=null,e.controlCoordinates.capture=!1):e.controlCoordinates.touchCount===1?(e.controlCoordinates.initialPointerOffsetX=d.touches[0].clientX,e.controlCoordinates.initialPointerOffsetY=d.touches[0].clientY):e.controlCoordinates.touchCount>1&&(e.controlCoordinates.initialPinchDistance=null)),e.controlCoordinates.mousedown){e.controlCoordinates.mousedown=!1;var g=!0;e.options.loop||(e.currentImageIndex===0&&e.controlCoordinates.swipeDiff<0&&(g=!1),e.currentImageIndex>=e.relatedElements.length-1&&e.controlCoordinates.swipeDiff>0&&(g=!1)),Math.abs(e.controlCoordinates.swipeDiff)>e.options.swipeTolerance&&g?e.loadImage(e.controlCoordinates.swipeDiff>0?1:-1):e.options.animationSlide&&e.slide(e.options.animationSpeed/1e3,"0px"),e.options.swipeClose&&Math.abs(e.controlCoordinates.swipeYDiff)>50&&Math.abs(e.controlCoordinates.swipeDiff)<e.options.swipeTolerance&&e.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(d){if(!e.isTouchDevice)return e.controlCoordinates.initialPointerOffsetX=d.clientX,e.controlCoordinates.initialPointerOffsetY=d.clientY,e.controlCoordinates.containerHeight=e.getDimensions(e.domNodes.image).height,e.controlCoordinates.containerWidth=e.getDimensions(e.domNodes.image).width,e.controlCoordinates.imgHeight=e.getDimensions(e.currentImage).height,e.controlCoordinates.imgWidth=e.getDimensions(e.currentImage).width,e.controlCoordinates.containerOffsetX=e.domNodes.image.offsetLeft,e.controlCoordinates.containerOffsetY=e.domNodes.image.offsetTop,e.currentImage.classList.add("sl-transition"),e.controlCoordinates.zoomed?(e.controlCoordinates.initialScale=1,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),e.controlCoordinates.zoomed=!1,e.domNodes.caption.style.display==="none"&&e.fadeIn(e.domNodes.caption,e.options.fadeSpeed)):(e.controlCoordinates.initialScale=e.options.doubleTapZoom,e.setZoomData(e.controlCoordinates.initialScale,0,0),e.zoomPanElement("0px","0px",e.controlCoordinates.initialScale),(!e.domNodes.caption.style.opacity||e.domNodes.caption.style.opacity>0)&&e.domNodes.caption.style.display!=="none"&&e.fadeOut(e.domNodes.caption,e.options.fadeSpeed),e.controlCoordinates.zoomed=!0),setTimeout(function(){e.currentImage&&(e.currentImage.classList.remove("sl-transition"),e.currentImage.style[e.transitionPrefix+"transform-origin"]=null)},200),e.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(e){var o=window.getComputedStyle(e),d=e.offsetHeight,g=e.offsetWidth,C=parseFloat(o.borderTopWidth),c=parseFloat(o.borderBottomWidth),l=parseFloat(o.paddingTop),i=parseFloat(o.paddingBottom),s=parseFloat(o.borderLeftWidth),y=parseFloat(o.borderRightWidth),w=parseFloat(o.paddingLeft),h=parseFloat(o.paddingRight);return{height:d-c-C-l-i,width:g-s-y-w-h}}},{key:"updateHash",value:function(){var e="pid="+(this.currentImageIndex+1),o=window.location.href.split("#")[0]+"#"+e;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,o):this.historyHasChanges?window.location.replace(o):window.location.hash=e,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(e,o,d){var g=this;if(this.options.captions&&e&&e!==""&&typeof e<"u"){var C,c=!((C=d??this.options.captionHTML)!==null&&C!==void 0)||C?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=o+"px",this.domNodes.caption[c]=e,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){g.fadeIn(g.domNodes.caption,g.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(e,o){if(!this.transitionCapable)return this.domNodes.image.style.left=o;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+o+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+e+"s linear"}},{key:"getRelated",value:function(e){var o;return e&&e!==!1&&e!=="nofollow"?o=Array.from(this.elements).filter(function(d){return d.getAttribute("rel")===e}):o=this.elements,o}},{key:"openImage",value:function(e){var o=this;e.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(e.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(e);var d=e.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",d),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(d)===-1&&this.loadedImages.push(d),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){e.dispatchEvent(new Event("shown."+o.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var e=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(o){document!==o.target&&e.domNodes.wrapper!==o.target&&!e.domNodes.wrapper.contains(o.target)&&e.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(e,o,d,g){e=this.wrap(e),o=this.wrap(o);var C=a(e),c;try{for(C.s();!(c=C.n()).done;){var l=c.value;l.namespaces||(l.namespaces={});var i=a(o),s;try{for(i.s();!(s=i.n()).done;){var y=s.value,w=g||!1,h=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(y.split(".")[0])>=0;h&&this.isPassiveEventsSupported&&(t(w)==="object"?w.passive=!0:w={passive:!0}),l.namespaces[y]=d,l.addEventListener(y.split(".")[0],d,w)}}catch(E){i.e(E)}finally{i.f()}}}catch(E){C.e(E)}finally{C.f()}}},{key:"removeEventListener",value:function(e,o){e=this.wrap(e),o=this.wrap(o);var d=a(e),g;try{for(d.s();!(g=d.n()).done;){var C=g.value,c=a(o),l;try{for(c.s();!(l=c.n()).done;){var i=l.value;C.namespaces&&C.namespaces[i]&&(C.removeEventListener(i.split(".")[0],C.namespaces[i]),delete C.namespaces[i])}}catch(s){c.e(s)}finally{c.f()}}}catch(s){d.e(s)}finally{d.f()}}},{key:"fadeOut",value:function(e,o,d){var g=this;e=this.wrap(e);var C=a(e),c;try{for(C.s();!(c=C.n()).done;){var l=c.value;l.style.opacity=parseFloat(l)||window.getComputedStyle(l).getPropertyValue("opacity")}}catch(y){C.e(y)}finally{C.f()}this.isFadeIn=!1;var i=16.66666/(o||this.options.fadeSpeed),s=function y(){var w=parseFloat(e[0].style.opacity);if((w-=i)<0){var h=a(e),E;try{for(h.s();!(E=h.n()).done;){var O=E.value;O.style.display="none",O.style.opacity=1}}catch(H){h.e(H)}finally{h.f()}d&&d.call(g,e)}else{var T=a(e),D;try{for(T.s();!(D=T.n()).done;){var Y=D.value;Y.style.opacity=w}}catch(H){T.e(H)}finally{T.f()}requestAnimationFrame(y)}};s()}},{key:"fadeIn",value:function(e,o,d,g){var C=this;e=this.wrap(e);var c=a(e),l;try{for(c.s();!(l=c.n()).done;){var i=l.value;i&&(i.style.opacity=0,i.style.display=g||"block")}}catch(h){c.e(h)}finally{c.f()}this.isFadeIn=!0;var s=parseFloat(e[0].dataset.opacityTarget||1),y=16.66666*s/(o||this.options.fadeSpeed),w=function h(){var E=parseFloat(e[0].style.opacity);if((E+=y)>s){var Y=a(e),H;try{for(Y.s();!(H=Y.n()).done;){var G=H.value;G&&(G.style.opacity=s)}}catch(_){Y.e(_)}finally{Y.f()}d&&d.call(C,e)}else{var O=a(e),T;try{for(O.s();!(T=O.n()).done;){var D=T.value;D&&(D.style.opacity=E)}}catch(_){O.e(_)}finally{O.f()}if(!C.isFadeIn)return;requestAnimationFrame(h)}};w()}},{key:"hide",value:function(e){e=this.wrap(e);var o=a(e),d;try{for(o.s();!(d=o.n()).done;){var g=d.value;g.style.display!="none"&&(g.dataset.initialDisplay=g.style.display),g.style.display="none"}}catch(C){o.e(C)}finally{o.f()}}},{key:"show",value:function(e,o){e=this.wrap(e);var d=a(e),g;try{for(d.s();!(g=d.n()).done;){var C=g.value;C.style.display=C.dataset.initialDisplay||o||"block"}}catch(c){d.e(c)}finally{d.f()}}},{key:"wrap",value:function(e){return typeof e[Symbol.iterator]=="function"&&typeof e!="string"?e:[e]}},{key:"on",value:function(e,o){e=this.wrap(e);var d=a(this.elements),g;try{for(d.s();!(g=d.n()).done;){var C=g.value;C.fullyNamespacedEvents||(C.fullyNamespacedEvents={});var c=a(e),l;try{for(c.s();!(l=c.n()).done;){var i=l.value;C.fullyNamespacedEvents[i]=o,C.addEventListener(i,o)}}catch(s){c.e(s)}finally{c.f()}}}catch(s){d.e(s)}finally{d.f()}return this}},{key:"off",value:function(e){e=this.wrap(e);var o=a(this.elements),d;try{for(o.s();!(d=o.n()).done;){var g=d.value,C=a(e),c;try{for(C.s();!(c=C.n()).done;){var l=c.value;typeof g.fullyNamespacedEvents<"u"&&l in g.fullyNamespacedEvents&&g.removeEventListener(l,g.fullyNamespacedEvents[l])}}catch(i){C.e(i)}finally{C.f()}}}catch(i){o.e(i)}finally{o.f()}return this}},{key:"open",value:function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;e=e||this.elements[0],typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get(0)),o>0&&(e=this.elements[o]),this.initialImageIndex=this.elements.indexOf(e),this.initialImageIndex>-1&&this.openImage(e)}},{key:"openPosition",value:function(e){var o=this.elements[e];this.open(o,e)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var e=this.options,o=this.initialSelector;return this.destroy(),this.constructor(o,e),this}}]),b}(),X=k;m.default=X,W.SimpleLightbox=k})(K);const we=Z(K);export{Ce as J,we as S,be as i};
//# sourceMappingURL=vendor-BQtx5cQJ.js.map
